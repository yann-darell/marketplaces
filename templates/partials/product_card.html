<div class="card h-100 shadow-sm transition-all product-card">
  {% if product.image %}
    <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.title }}" style="height: 250px; object-fit: cover;">
  {% else %}
    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 250px;">
      <i class="fas fa-image text-muted" style="font-size: 3rem;"></i>
    </div>
  {% endif %}

  <div style="position: absolute; top: 10px; right: 10px;">
    {% if product.average_rating %}
      <span class="badge bg-warning text-dark">
        <i class="fas fa-star"></i> {{ product.average_rating|floatformat:1 }}
      </span>
    {% endif %}
  </div>

  <div class="card-body">
    <h5 class="card-title">{{ product.title }}</h5>
    <p class="card-text text-muted small">{{ product.description|truncatewords:15 }}</p>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <span class="h5 text-gradient mb-0">{{ product.price }} €</span>
      {% if product.stock > 0 %}
        <span class="badge bg-success"><i class="fas fa-check-circle"></i> Stock: {{ product.stock }}</span>
      {% else %}
        <span class="badge bg-danger"><i class="fas fa-times-circle"></i> Rupture</span>
      {% endif %}
    </div>
  </div>

  <div class="card-footer bg-white border-top">
    <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary w-100 btn-sm"><i class="fas fa-eye"></i> Voir Détails</a>
  </div>
</div>
