{% extends 'base.html' %}
{% block title %}Mon Dashboard - Marketplace{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-8">
    <div class="card mb-4 p-3">
      <h5>Bienvenue, {{ user.first_name|default:user.username }}</h5>
      <p class="text-secondary">Voici un aperçu de votre activité récente.</p>
    </div>

    <div class="card p-3 mb-4">
      <h6>Historique des commandes</h6>
      <table class="table mt-3">
        <thead>
          <tr><th>Commande</th><th>Date</th><th>Montant</th><th>Statut</th></tr>
        </thead>
        <tbody>
          {% for order in orders %}
            <tr>
              <td>#{{ order.id }}</td>
              <td>{{ order.created_at }}</td>
              <td>{{ order.total }}€</td>
              <td><span class="badge bg-info">{{ order.status }}</span></td>
            </tr>
          {% empty %}
            <tr><td colspan="4">Aucune commande récente.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <aside class="col-md-4">
    <div class="card p-3 mb-4">
      <h6>Statistiques</h6>
      <canvas id="visitsChart" width="400" height="200"></canvas>
    </div>
    <div class="card p-3">
      <h6>Actions rapides</h6>
      <a href="{% url 'product_list' %}" class="btn btn-outline-secondary w-100 mb-2">Parcourir produits</a>
      <a href="{% url 'cart' %}" class="btn btn-primary w-100">Voir mon panier</a>
    </div>
  </aside>
</div>
{% endblock %}
